define(["underscore","jquery","mage/apply/main","Magento_Ui/js/lib/view/utils/dom-observer"],function(s,t,l,r){return function(u,n){s.each(u.config,function(c,e){r.get(e,function(e){let o=t(e);if((o=n?t(n).find(e):o).length){let n=new IntersectionObserver(((t,r)=>{let i;return function(){let e=this,n=arguments;clearTimeout(i),i=setTimeout(()=>t.apply(e,n),r)}})(e=>{e.forEach(e=>{var t,r,i;e.isIntersecting&&(t=o,r=u.breakpoints,i=u.currentViewport,s.each(c,function(e,n){(e=e||{}).breakpoints=r,e.currentViewport=i,l.applyFor(t,e,n)}),n.disconnect())})},100),{root:null,threshold:[0,.25,.5,.75,1]});n.observe(o[0])}})})}});